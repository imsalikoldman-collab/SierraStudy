# Текстовое описание требований для разработки спецификации

Документ служит кратким конспектом визуальных ожиданий от кастом-стади. После разбора YAML-файла формируется структура с объектами, которые необходимо отобразить на графике.

## Общие правила
- Отрисовка начинается в момент времени `generated_at` и тянется вправо до текущей правой границы графика.
- Все ценовые значения берутся из диапазонов и уровней, указанных в файле; координаты по времени зависят только от `generated_at`.
- Цветовая схема фиксирована: `zone_long` (buy) — зелёный, `zone_short` (sell) — красный, зона инвалидации — серый, `flip` — фиолетовый (или другой нейтральный из темы).

## Зоны (`zone_long`, `zone_short`)
- В каждой секции инструмента присутствует максимум одна зона каждого типа; если объект отсутствует, соответствующий прямоугольник не создаётся.
- Каждый объект зоны задаётся диапазоном `range`. Он отображается прямоугольником, заполненным полупрозрачным цветом.
- В центре прямоугольника размещается текст из поля `label`, поясняющий назначение зоны.
- Если указано поле `invalidation`, поверх основной зоны рисуется второй прямоугольник серого цвета, подчёркивающий диапазон инвалидации.

## Горизонтальные уровни (`sl`, `tp1`, `tp2`)
- Каждый уровень — это горизонтальный луч (`DRAWING_HORIZONTAL_RAY`), начинающийся в `generated_at` и направленный вправо.
- Цвета уровней: стоп-лосс — тонкая пунктирная красная линия; тейк-профиты — тонкие пунктирные зелёные линии.
- Рядом с лучом обязательно выводится подпись вида «название уровня + цена», располагаемая справа сверху.

## Flip-зона
- Объект `flip` отображается прямоугольником с нейтральным цветом.
- Подпись с текстом `label` размещается в центре диапазона, сдвигаясь к правому краю прямоугольника.

## Дополнительные требования
- Все прямоугольные элементы должны иметь числовые подписи уровней (цены) в соответствии с настройками шрифта кастом-стади.
- Остальные одиночные значения, не входящие в прямоугольники, визуализируются горизонтальными лучами по правилам уровней.
- Подписи и графические объекты должны оставаться читаемыми при прокрутке и зуме графика.
